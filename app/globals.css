/* app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------- Base ---------------- */

:root {
  --transition-fast: 180ms ease-out;
}

/* Body uses theme variables */
body {
  margin: 0;
  padding: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "Inter", sans-serif;
  background: var(--bg-root);
  color: var(--text-main);
  transition:
    background-color var(--transition-fast),
    color var(--transition-fast);
}

/* Main shell wrapper */
.woc-shell {
  background: var(--bg-shell);
  color: var(--text-main);
  transition:
    background-color var(--transition-fast),
    color var(--transition-fast),
    background var(--transition-fast),
    filter 220ms ease-out;
}

/* Card container */
.woc-card {
  background: var(--bg-card);
  border-radius: 1.25rem;
  border: 1px solid var(--border-subtle);
  box-shadow: var(--shadow-card);
}

/* Little pill chips */
.woc-pill,
.woc-tag {
  padding: 0.25rem 0.75rem;
  border-radius: 999px;
  font-size: 0.75rem;
  background: var(--pill-bg);
  color: var(--pill-text);
}

/* ---------------- THEMES (Cosmic vs Promo) ---------------- */

/* Cosmic dark – default */
.theme-cosmic {
  --bg-root: #020617;
  --bg-shell: radial-gradient(circle at top, #0f172a 0, #020617 60%);
  --bg-card: rgba(15, 23, 42, 0.85);

  --text-main: #e5e7eb;
  --text-muted: #9ca3af;

  --accent: #38bdf8;
  --accent-soft: rgba(56, 189, 248, 0.18);

  --pill-bg: rgba(15, 23, 42, 0.9);
  --pill-text: #e5e7eb;

  --border-subtle: rgba(148, 163, 184, 0.35);
  --shadow-card: 0 18px 45px rgba(15, 23, 42, 0.8);
}

/* Promo light */
.theme-promo {
  --bg-root: #f5f7ff;
  --bg-shell: radial-gradient(circle at top, #eef2ff 0, #f9fafb 60%);
  --bg-card: #ffffff;

  --text-main: #020617;
  --text-muted: #6b7280;

  --accent: #4f46e5;
  --accent-soft: rgba(79, 70, 229, 0.08);

  --pill-bg: #e5e7ff;
  --pill-text: #111827;

  --border-subtle: rgba(148, 163, 184, 0.4);
  --shadow-card: 0 18px 50px rgba(15, 23, 42, 0.12);
}

/* Hero headline gradient changes between themes */
.theme-cosmic .woc-hero-gradient {
  background-image: linear-gradient(120deg, #38bdf8, #a855f7, #f97316);
}

.theme-promo .woc-hero-gradient {
  background-image: linear-gradient(120deg, #4f46e5, #ec4899, #f97316);
}

/* ---------------- Buttons ---------------- */

.woc-btn-primary {
  border-radius: 999px;
  padding: 0.6rem 1.4rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  background: var(--accent);
  color: white;
  box-shadow: 0 10px 30px rgba(15, 23, 42, 0.35);
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast),
    background-color var(--transition-fast);
}

.woc-btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 34px rgba(15, 23, 42, 0.45);
}

.woc-btn-ghost {
  border-radius: 999px;
  padding: 0.6rem 1.4rem;
  font-weight: 500;
  border: 1px solid var(--border-subtle);
  background: var(--accent-soft);
  color: var(--text-main);
  backdrop-filter: blur(10px);
}

/* ---------------- Intro modal ---------------- */

.woc-intro-backdrop {
  position: fixed;
  inset: 0;
  z-index: 50;
  background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), rgba(2, 6, 23, 0.98));
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.5rem;
}

.woc-intro-dialog {
  max-width: 420px;
  width: 100%;
  border-radius: 1rem;
  background: rgba(15, 23, 42, 0.96);
  border: 1px solid var(--border-subtle);
  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.8);
  padding: 1.25rem 1.4rem;
}

/* ---------------- WOC Talks mood cards ---------------- */

.mood-battle {
  box-shadow: 0 14px 30px rgba(248, 113, 113, 0.25);
  border-color: rgba(248, 113, 113, 0.5);
}

.mood-battle .woc-tag,
.mood-battle button.woc-btn-ghost {
  background: rgba(248, 113, 113, 0.12);
}

.mood-playful {
  box-shadow: 0 14px 30px rgba(168, 85, 247, 0.3);
  border-color: rgba(168, 85, 247, 0.5);
}

.mood-story {
  box-shadow: 0 14px 30px rgba(59, 130, 246, 0.25);
}

.mood-flustered {
  box-shadow: 0 14px 30px rgba(244, 114, 182, 0.3);
}

.mood-omen {
  box-shadow: 0 16px 36px rgba(109, 40, 217, 0.4);
  border-color: rgba(109, 40, 217, 0.7);
}

/* ---------------- Mood-driven accent & backgrounds ---------------- */
/* These are triggered by body[data-woc-mood="…"] which your WocThemeProvider sets */

body[data-woc-mood='battle'] {
  --accent: #fb7185;
  --accent-soft: rgba(251, 113, 133, 0.16);
}

body[data-woc-mood='playful'] {
  --accent: #22c55e;
  --accent-soft: rgba(34, 197, 94, 0.18);
}

body[data-woc-mood='story'] {
  --accent: #a855f7;
  --accent-soft: rgba(168, 85, 247, 0.16);
}

body[data-woc-mood='omen'] {
  --accent: #f97316;
  --accent-soft: rgba(249, 115, 22, 0.18);
}

body[data-woc-mood='flustered'] {
  --accent: #ec4899;
  --accent-soft: rgba(236, 72, 153, 0.18);
}

/* Shell tints by mood (on top of theme-cosmic/theme-promo) */
body[data-woc-mood='battle'] .woc-shell {
  background-image: radial-gradient(circle at top, #1e293b 0, #020617 65%);
}
body[data-woc-mood='playful'] .woc-shell {
  background-image: radial-gradient(circle at top, #022c22 0, #020617 65%);
}
body[data-woc-mood='story'] .woc-shell {
  background-image: radial-gradient(circle at top, #111827 0, #020617 65%);
}
body[data-woc-mood='omen'] .woc-shell {
  background-image: radial-gradient(circle at top, #0b1120 0, #020617 65%);
}
body[data-woc-mood='flustered'] .woc-shell {
  filter: hue-rotate(18deg) saturate(1.15);
}

/* ---------------- Avatar mood animations ---------------- */

.woc-avatar {
  transition:
    transform 220ms ease-out,
    box-shadow 220ms ease-out,
    border-color 220ms ease-out,
    filter 220ms ease-out;
}

/* Neutral – chill idle float */
body[data-woc-mood="neutral"] .woc-avatar {
  animation: wocAvatarFloat 4s ease-in-out infinite;
  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.65);
}

/* Battle – quick pulse + slight shake */
body[data-woc-mood="battle"] .woc-avatar {
  animation: wocAvatarBattle 0.7s ease-in-out infinite;
  border-color: rgba(248, 113, 113, 0.9);
  box-shadow: 0 0 26px rgba(248, 113, 113, 0.7);
  filter: saturate(1.15);
}

/* Playful – bouncy bob + brighter glow */
body[data-woc-mood="playful"] .woc-avatar {
  animation: wocAvatarBounce 1.5s ease-in-out infinite;
  border-color: rgba(251, 191, 36, 0.9);
  box-shadow: 0 0 24px rgba(251, 191, 36, 0.7);
  filter: saturate(1.2);
}

/* Story – slow drift */
body[data-woc-mood="story"] .woc-avatar {
  animation: wocAvatarStory 5.2s ease-in-out infinite;
  box-shadow: 0 18px 40px rgba(56, 189, 248, 0.35);
}

/* Omen – subtle glitch / jitter */
body[data-woc-mood="omen"] .woc-avatar {
  animation:
    wocAvatarOmen 0.24s steps(2, end) infinite,
    wocAvatarFloat 4s ease-in-out infinite;
  border-color: rgba(129, 140, 248, 0.95);
  box-shadow: 0 0 30px rgba(129, 140, 248, 0.8);
  filter: hue-rotate(-10deg) contrast(1.08);
}

/* Flustered – little shaky blush */
body[data-woc-mood="flustered"] .woc-avatar {
  animation:
    wocAvatarBlush 1.1s ease-in-out infinite,
    wocAvatarShake 0.25s ease-in-out;
  border-color: rgba(244, 114, 182, 0.95);
  box-shadow: 0 0 26px rgba(244, 114, 182, 0.7);
  filter: hue-rotate(12deg) saturate(1.2);
}

/* Avatar keyframes */

@keyframes wocAvatarFloat {
  0%   { transform: translateY(0); }
  50%  { transform: translateY(-3px); }
  100% { transform: translateY(0); }
}

@keyframes wocAvatarBattle {
  0%   { transform: translateY(-1px) scale(1.02); }
  50%  { transform: translateY(0) scale(1.05); }
  100% { transform: translateY(-1px) scale(1.02); }
}

@keyframes wocAvatarBounce {
  0%   { transform: translateY(0) scale(1); }
  30%  { transform: translateY(-4px) scale(1.05); }
  60%  { transform: translateY(1px) scale(0.99); }
  100% { transform: translateY(0) scale(1); }
}

@keyframes wocAvatarStory {
  0%   { transform: translateY(0) scale(1); }
  25%  { transform: translateY(-2px) scale(1.01); }
  50%  { transform: translateY(-1px) scale(1.005); }
  75%  { transform: translateY(-3px) scale(1.015); }
  100% { transform: translateY(0) scale(1); }
}

@keyframes wocAvatarOmen {
  0%   { transform: translate(0, 0); }
  20%  { transform: translate(-1px, 1px); }
  40%  { transform: translate(1px, -1px); }
  60%  { transform: translate(-1px, -1px); }
  80%  { transform: translate(1px, 1px); }
  100% { transform: translate(0, 0); }
}

@keyframes wocAvatarBlush {
  0%   { transform: translateY(0) scale(1); }
  40%  { transform: translateY(-2px) scale(1.03); }
  70%  { transform: translateY(1px) scale(0.99); }
  100% { transform: translateY(0) scale(1); }
}

@keyframes wocAvatarShake {
  0%   { transform: translateX(0); }
  25%  { transform: translateX(-2px); }
  50%  { transform: translateX(2px); }
  75%  { transform: translateX(-1px); }
  100% { transform: translateX(0); }
}
